# client - server communication using net socket

Микросервис построен в предположении, что идёт большой параллельный поток запросов какого либо ресурса у сервера от многих клиентов.

Сервер складывает поступившие запросы в очередь и сообщает Worker что необходимо начать обработку запросов.

Клиент может запрашивать какой-либо ресурс, например билеты в кинотеатр переговорные комнаты, прокси-сервера и т.д.

Для подобного рода запросов создаётся пул ресурсов который может как пополняться, так и освобождаться.  Из этого пула ресурсов микросервис выдаёт по запросу один или несколько ресурсов.

Например, у вас есть некие заранее выделенные прокси-сервера  и Вы должны выдать  первый свободный прокси сервер.

Чтобы не создавать проблемы с возможной взаимной блокировкой ресурсов все запросы обрабатываются одним Worker, который координирует работу jobber.

Каждый запрос характеризуется своим типом. Например, один тип запроса - это выдать прокси сервер второй тип запроса - освободить прокси сервер. Третий запрос может бронировать переговорные комнаты.

Поскольку предполагается большой параллельный поток запросов к микросервису, то возникает вполне естественный вопрос по коммуникации между клиентом и сервером.
С одной стороны для данной задачи вполне подходит стандартная коммуникация через rest api.  Но она достаточно затратна по ресурсам.

Поэтому было принято решение использовать net socket. У net socket  есть несколько важных преимуществ:
- использование протокола tcp
- возможность бинарной передачи контента
- быстрая связь между клиентом и  сервером

Установка

Для использования пакета вам нужно создать один экземпляр сервера, который будет принимать запросы от клиентов. Также необходим один экземпляр Worker.  

Worker получает уведомления от сервера о том что имеются запросы от клиентов.  

Worker анализирует типы запросов и запускает необходимые джоберы.

Один джобер обрабатывает один тип запроса.

Для разных типов запросов worker может запускать параллельном несколько джоберов по одному джоберу на каждый тип запроса.

То есть Вы можете продавать билеты в кинотеатр и одновременно раздавать прокси-сервера. 
